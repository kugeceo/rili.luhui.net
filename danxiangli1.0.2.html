
<!DOCTYPE html>
<html lang="zh-CN" style="height:100%;overflow:hidden;">
<head>
<meta charset="UTF-8">
<meta name="renderer" content="webkit" />
<meta name="referrer" content="same-origin">
<meta name="force-rendering" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" href="favicon.png">
<link rel="shortcut icon" href="favicon.png" type="image/x-icon">
<title>鲁虺单向历</title>
<!--关键词-->
<meta name="keywords" content="鲁虺单向历魯虺免费图片,海报素材,,高清图片大全,在线设计,矢量图,矢量图库,免费素材模板下载"/>
<!--描述-->
<meta name="description" content="鲁虺日历网 http://rili.luhui.net 创意视觉解构,图像技术专业媒体,眼睛是盲目的要用心去洞悉幻觉真相,一站式鲁虺图片搜索引擎群,免费在线以图搜图,免费在线P图，专注正版商用图片素材在线设计与下载的网站！提供矢量图素材、背景图片、psd素材、字体模板、设计素材、PPT模板、视频素材、插画绘画、海报设计模板、网站设计素材等下载服务。全球最好网真互动式种源文化传播交流索引平台 lǔ 鲁 huǐ 虺 wén 文 huà 化 wǎng 网"/>
<style type="text/css">
    #rili{height:100%;overflow:hidden;position: relative;}
    #rili-container {
        height: 100%;
        transition: opacity 0.5s ease, transform 0.5s ease;
    }
    #rili img{height:100%;overflow:hidden;margin:0 auto;display:block;max-height:100% !important;max-width:100% !important;}
    @media (max-width:691px) {#rili img{height:auto;width:100%;}}
    
    /* 翻页按钮样式 */
    .page-btn {
        position: absolute;
        top: 0;
        height: 100%;
        width: 30%;
        cursor: pointer;
        z-index: 10;
        opacity: 0;
    }
    .prev-btn {
        left: 0;
    }
    .next-btn {
        right: 0;
    }
    .page-indicator {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: white;
        background: rgba(0,0,0,0.5);
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 16px;
        z-index: 5;
        transition: opacity 0.3s ease;
    }
    
    /* 翻页动画相关样式 */
    .fade-out-left {
        opacity: 0;
        transform: translateX(-30px);
    }
    .fade-out-right {
        opacity: 0;
        transform: translateX(30px);
    }
    .fade-in {
        opacity: 1;
        transform: translateX(0);
    }
</style>


<script type="text/javascript">
!function(n,t){"use strict";var e=function(n,t){var e=document.createElement("canvas");return e.setAttribute("width",n),e.setAttribute("height",t),e.getContext("2d")},r=function(n,t){var r=new Image,i=n.src||n;"data:"!==i.substring(0,5)&&(r.crossOrigin="Anonymous"),r.onload=function(){var n=e(r.width,r.height);n.drawImage(r,0,0);var i=n.getImageData(0,0,r.width,r.height);t&&t(i.data)},r.src=i},i=function(n){return["rgba(",n,",0.88)"].join("")},a=function(n){var t=[];for(var e in n)t.push(o(e,n[e]));return t.sort(function(n,t){return t.count-n.count}),t},u=function(n,t){if(n.length>t)return n.slice(0,t);for(var e=n.length-1;t-1>e;e++)n.push(o("0,0,0",0));return n},o=function(n,t){return{name:i(n),count:t}},c=10,s={};s.colors=function(n,e){e=e||{};var o=e.exclude||[],s=e.paletteSize||c;r(n,function(n){for(var r={},c="",f=[],d=0;d<n.length;d+=4)f[0]=n[d],f[1]=n[d+1],f[2]=n[d+2],c=f.join(","),-1===f.indexOf(t)&&0!==n[d+3]&&-1===o.indexOf(i(c))&&(r[c]=c in r?r[c]+1:1);if(e.success){var g=u(a(r),s+1);e.success({dominant:g[0].name,secondary:g[1].name,palette:g.map(function(n){return n.name}).slice(1)})}})},n.RGBaster=n.RGBaster||s}(window);
</script>



<script type="text/javascript">
    let currentDate = new Date(); // 当前显示的日期
    let isAnimating = false; // 动画状态锁，防止快速连续翻页
    
    window.onload=function(){
        getRili();
        // 添加键盘事件监听
        document.addEventListener('keydown', function(e) {
            if (isAnimating) return; // 动画进行中不响应新的翻页事件
            
            if (e.key === 'ArrowLeft') {
                prevDate();
            } else if (e.key === 'ArrowRight') {
                nextDate();
            }
        });
    }
    
    // 显示上一天
    function prevDate() {
        if (isAnimating) return;
        isAnimating = true;
        
        const container = document.getElementById('rili-container');
        container.classList.add('fade-out-right'); // 添加右移淡出动画
        
        setTimeout(() => {
            currentDate.setDate(currentDate.getDate() - 1);
            getRili(() => {
                // 动画完成后重置状态
                container.classList.remove('fade-out-right');
                isAnimating = false;
            });
        }, 300); // 与CSS动画时长对应
    }
    
    // 显示下一天
    function nextDate() {
        if (isAnimating) return;
        isAnimating = true;
        
        const container = document.getElementById('rili-container');
        container.classList.add('fade-out-left'); // 添加左移淡出动画
        
        setTimeout(() => {
            currentDate.setDate(currentDate.getDate() + 1);
            getRili(() => {
                // 动画完成后重置状态
                container.classList.remove('fade-out-left');
                isAnimating = false;
            });
        }, 300); // 与CSS动画时长对应
    }
    
    function getRili(callback){
      var y = currentDate.getFullYear(),
          m = currentDate.getMonth() + 1,
          n = currentDate.getDate();
      
      // 格式化月份和日期为两位数
      m = m > 9 ? m : "0" + m;
      n = n > 9 ? n : "0" + n;
      
      // 显示当前日期
      const dateStr = `${y}年${m}月${n}日`;
      
      var imgSrc = "https://img.owspace.com/Public/uploads/Download/"+y+"/"+m+n+".jpg";
      
      // 构建包含翻页按钮和日期显示的HTML
      var content = `
          <div class="page-btn prev-btn" onclick="prevDate()"></div>
          <div class="page-btn next-btn" onclick="nextDate()"></div>
          <div class="page-indicator">${dateStr}</div>
          <img src="${imgSrc}" onclick="nextDate()" />
      `;
      
      // 使用容器包裹内容以实现动画效果
      document.getElementById("rili").innerHTML = `<div id="rili-container" class="fade-in">${content}</div>`;
      
      RGBaster.colors(imgSrc, {
        paletteSize: 10, // 调色板大小
        exclude: [ 'rgba(255,255,255,0.88)','rgba(0,0,0,0.88)' ],  // 不包括白色
        success: function(payload) {
          console.log(payload.palette);
          var bgColor = payload.dominant;
          document.getElementById('rili').style.backgroundColor = bgColor;
          callback && callback(); // 通知动画完成
        }
      });
    }
  </script>
</head>
<body id="rili"></body>
</html>




<!--功能



增加翻页动画效果

以下是增加了翻页动画效果的单向历代码，通过淡入淡出和滑动效果提升翻页体验：

主要改进点：

1. 新增了翻页动画样式，包括：
   - 左翻页时的左移淡出效果（.fade-out-left）
   - 右翻页时的右移淡出效果（.fade-out-right）
   - 新内容的淡入效果（.fade-in）

2. 添加了动画状态控制：
   - 使用`isAnimating`变量防止快速连续翻页导致的动画混乱
   - 动画过程中忽略新的翻页请求

3. 结构调整：
   - 新增`rili-container`容器用于包裹所有内容，便于统一控制动画
   - 通过CSS过渡（transition）实现平滑的动画效果

4. 交互优化：
   - 翻页动画时长设置为0.5秒，提供流畅的视觉体验
   - 左右翻页使用不同方向的动画，增强方向感

这种动画效果既美观又不会影响用户体验，同时保持了原有的功能完整性。

更新-->

